(()=>{"use strict";const n=document.createElement("template");n.innerHTML='\n  <style>\n    :host {\n      display: block;\n      font-family: \'CiscoSans\', -apple-system, BlinkMacSystemFont, sans-serif;\n      font-size: 14px;\n      --primary: #e31837;\n      --primary-dark: #b8132c;\n      --success: #6fbe47;\n      --warning: #f5a623;\n      --bg: #ffffff;\n      --bg-secondary: #f8f9fa;\n      --text: #1a1a1a;\n      --text-secondary: #666;\n      --border: #e0e0e0;\n    }\n    :host([dark-mode="true"]) {\n      --bg: #1a1a1a;\n      --bg-secondary: #2d2d2d;\n      --text: #f0f0f0;\n      --text-secondary: #aaa;\n      --border: #444;\n    }\n    * { box-sizing: border-box; }\n    .container {\n      background: var(--bg);\n      color: var(--text);\n      border-radius: 8px;\n      overflow: hidden;\n      border: 1px solid var(--border);\n    }\n    .header {\n      background: var(--primary);\n      color: white;\n      padding: 12px 16px;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n    }\n    .header-title {\n      font-weight: 600;\n      font-size: 15px;\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n    .header-logo {\n      width: 24px;\n      height: 24px;\n      background: white;\n      border-radius: 4px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-weight: bold;\n      color: var(--primary);\n      font-size: 12px;\n    }\n    .search-section {\n      padding: 16px;\n      background: var(--bg-secondary);\n      border-bottom: 1px solid var(--border);\n    }\n    .search-row {\n      display: flex;\n      gap: 8px;\n    }\n    .search-input {\n      flex: 1;\n      padding: 10px 12px;\n      border: 1px solid var(--border);\n      border-radius: 4px;\n      font-size: 14px;\n      background: var(--bg);\n      color: var(--text);\n    }\n    .search-input:focus {\n      outline: none;\n      border-color: var(--primary);\n    }\n    .btn {\n      padding: 10px 16px;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: all 0.2s;\n    }\n    .btn-primary {\n      background: var(--primary);\n      color: white;\n    }\n    .btn-primary:hover { background: var(--primary-dark); }\n    .btn-primary:disabled {\n      background: #ccc;\n      cursor: not-allowed;\n    }\n    .btn-secondary {\n      background: transparent;\n      color: var(--primary);\n      border: 1px solid var(--primary);\n    }\n    .btn-secondary:hover { background: rgba(227,24,55,0.1); }\n    .btn-sm { padding: 6px 12px; font-size: 12px; }\n\n    /* Loading & States */\n    .loading, .error, .empty {\n      padding: 40px 20px;\n      text-align: center;\n      color: var(--text-secondary);\n    }\n    .spinner {\n      width: 32px;\n      height: 32px;\n      border: 3px solid var(--border);\n      border-top-color: var(--primary);\n      border-radius: 50%;\n      animation: spin 1s linear infinite;\n      margin: 0 auto 12px;\n    }\n    @keyframes spin { to { transform: rotate(360deg); } }\n    .error { color: var(--primary); }\n\n    /* Customer Profile */\n    .profile-section { padding: 16px; }\n    .customer-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-start;\n      margin-bottom: 16px;\n    }\n    .customer-name {\n      font-size: 18px;\n      font-weight: 600;\n      margin: 0 0 4px 0;\n    }\n    .customer-id {\n      font-size: 12px;\n      color: var(--text-secondary);\n    }\n    .member-badge {\n      background: var(--success);\n      color: white;\n      padding: 4px 10px;\n      border-radius: 12px;\n      font-size: 11px;\n      font-weight: 600;\n    }\n    .member-badge.freshpass {\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    }\n\n    /* Points Card */\n    .points-card {\n      background: linear-gradient(135deg, var(--primary) 0%, #c41230 100%);\n      color: white;\n      padding: 20px;\n      border-radius: 8px;\n      margin-bottom: 16px;\n    }\n    .points-label { font-size: 12px; opacity: 0.9; }\n    .points-value {\n      font-size: 36px;\n      font-weight: 700;\n      margin: 4px 0;\n    }\n    .points-expiry { font-size: 11px; opacity: 0.8; }\n    .points-row {\n      display: flex;\n      justify-content: space-between;\n      margin-top: 16px;\n      padding-top: 12px;\n      border-top: 1px solid rgba(255,255,255,0.2);\n    }\n    .points-stat { text-align: center; }\n    .points-stat-value { font-size: 18px; font-weight: 600; }\n    .points-stat-label { font-size: 10px; opacity: 0.8; }\n\n    /* Info Grid */\n    .info-grid {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 12px;\n      margin-bottom: 16px;\n    }\n    .info-card {\n      background: var(--bg-secondary);\n      padding: 12px;\n      border-radius: 6px;\n    }\n    .info-card-label {\n      font-size: 11px;\n      color: var(--text-secondary);\n      margin-bottom: 4px;\n    }\n    .info-card-value { font-weight: 500; }\n\n    /* Tabs */\n    .tabs {\n      display: flex;\n      border-bottom: 1px solid var(--border);\n      background: var(--bg-secondary);\n    }\n    .tab {\n      flex: 1;\n      padding: 12px;\n      text-align: center;\n      cursor: pointer;\n      font-size: 13px;\n      font-weight: 500;\n      color: var(--text-secondary);\n      border-bottom: 2px solid transparent;\n      transition: all 0.2s;\n    }\n    .tab:hover { color: var(--text); }\n    .tab.active {\n      color: var(--primary);\n      border-bottom-color: var(--primary);\n    }\n    .tab-content { display: none; padding: 16px; }\n    .tab-content.active { display: block; }\n\n    /* Rewards List */\n    .rewards-list { max-height: 200px; overflow-y: auto; }\n    .reward-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 10px 0;\n      border-bottom: 1px solid var(--border);\n    }\n    .reward-item:last-child { border-bottom: none; }\n    .reward-name { font-weight: 500; }\n    .reward-meta { font-size: 12px; color: var(--text-secondary); }\n    .reward-points {\n      background: var(--bg-secondary);\n      padding: 4px 10px;\n      border-radius: 12px;\n      font-size: 12px;\n      font-weight: 600;\n    }\n\n    /* Transaction List */\n    .transaction-item {\n      display: flex;\n      justify-content: space-between;\n      padding: 10px 0;\n      border-bottom: 1px solid var(--border);\n    }\n    .transaction-item:last-child { border-bottom: none; }\n    .transaction-date { font-size: 12px; color: var(--text-secondary); }\n    .transaction-amount { font-weight: 600; }\n    .transaction-points { font-size: 12px; color: var(--success); }\n\n    /* Actions */\n    .actions {\n      display: flex;\n      gap: 8px;\n      padding: 16px;\n      border-top: 1px solid var(--border);\n      flex-wrap: wrap;\n    }\n    .actions .btn { flex: 1; min-width: 120px; }\n\n    /* Quick Actions */\n    .quick-actions {\n      display: grid;\n      grid-template-columns: repeat(3, 1fr);\n      gap: 8px;\n    }\n    .quick-action {\n      background: var(--bg-secondary);\n      border: 1px solid var(--border);\n      border-radius: 6px;\n      padding: 12px 8px;\n      text-align: center;\n      cursor: pointer;\n      transition: all 0.2s;\n    }\n    .quick-action:hover {\n      border-color: var(--primary);\n      background: rgba(227,24,55,0.05);\n    }\n    .quick-action-icon { font-size: 20px; margin-bottom: 4px; }\n    .quick-action-label { font-size: 11px; }\n  </style>\n  \n  <div class="container">\n    <div class="header">\n      <div class="header-title">\n        <div class="header-logo">A</div>\n        <span>for U‚Ñ¢ Rewards</span>\n      </div>\n      <button class="btn btn-sm" id="refreshBtn" style="background:rgba(255,255,255,0.2);color:white;border:none;">‚Üª</button>\n    </div>\n    \n    <div class="search-section">\n      <div class="search-row">\n        <input type="tel" class="search-input" id="phoneInput" placeholder="Enter phone number (ANI)" maxlength="14">\n        <button class="btn btn-primary" id="searchBtn">Search</button>\n      </div>\n    </div>\n    \n    <div id="content">\n      <div class="empty">\n        <p>Enter a phone number to look up customer rewards</p>\n      </div>\n    </div>\n  </div>\n';class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(n.content.cloneNode(!0)),this._customer=null,this._loading=!1,this._activeTab="overview",this._phoneInput=this.shadowRoot.getElementById("phoneInput"),this._searchBtn=this.shadowRoot.getElementById("searchBtn"),this._refreshBtn=this.shadowRoot.getElementById("refreshBtn"),this._content=this.shadowRoot.getElementById("content")}static get observedAttributes(){return["ani","dark-mode","interaction-id"]}connectedCallback(){this._searchBtn.addEventListener("click",()=>this._searchCustomer()),this._refreshBtn.addEventListener("click",()=>this._refresh()),this._phoneInput.addEventListener("keypress",n=>{"Enter"===n.key&&this._searchCustomer()}),this._phoneInput.addEventListener("input",n=>this._formatPhone(n)),this.dispatchEvent(new CustomEvent("widget-ready",{bubbles:!0,composed:!0}))}attributeChangedCallback(n,t,e){t!==e&&"ani"===n&&e&&(this._phoneInput.value=this._formatPhoneNumber(e),this._searchCustomer())}setANI(n){n&&(this._phoneInput.value=this._formatPhoneNumber(n),this._searchCustomer())}getCustomerData(){return this._customer}_formatPhone(n){let t=n.target.value.replace(/\D/g,"");t.length>10&&(t=t.slice(0,10)),t.length>=6?t=`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:t.length>=3&&(t=`(${t.slice(0,3)}) ${t.slice(3)}`),n.target.value=t}_formatPhoneNumber(n){const t=n.replace(/\D/g,"").slice(-10);return 10===t.length?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:n}async _searchCustomer(){const n=this._phoneInput.value.replace(/\D/g,"");if(10===n.length){this._setLoading(!0);try{const t=await this._fetchCustomerData(n);this._customer=t,this._renderCustomer(),this.dispatchEvent(new CustomEvent("customer-loaded",{bubbles:!0,composed:!0,detail:{customer:t,phone:n}}))}catch(n){this._showError(n.message||"Failed to load customer data")}finally{this._setLoading(!1)}}else this._showError("Please enter a valid 10-digit phone number")}async _fetchCustomerData(n){await new Promise(n=>setTimeout(n,800));const t=n.slice(-4);return{id:`ALB-${t}${Date.now().toString().slice(-4)}`,phone:n,firstName:"Sarah",lastName:"Johnson",email:`sjohnson${t}@email.com`,memberSince:"2021-03-15",tier:Math.random()>.5?"FreshPass":"Standard",points:{current:Math.floor(2e3*Math.random())+500,expiring:Math.floor(300*Math.random()),expiryDate:this._getNextMonth(),lifetimeEarned:Math.floor(15e3*Math.random())+5e3,lifetimeRedeemed:Math.floor(1e4*Math.random())+2e3},rewards:{birthdayTreat:{available:!0,expiresOn:"2025-12-31"},freeMonthlyItem:{available:!0,item:"O Organics¬Æ Milk",expiresOn:"2025-12-31"},gasRewards:{centsOff:30,gallonsRemaining:25}},recentTransactions:[{date:"2025-12-08",store:"Albertsons #1234",amount:87.42,pointsEarned:87},{date:"2025-12-05",store:"Albertsons #1234",amount:45.18,pointsEarned:45},{date:"2025-12-01",store:"Albertsons #5678",amount:123.67,pointsEarned:124}],availableOffers:[{name:"$4 off Purchase",points:300,type:"grocery"},{name:"$15 off Purchase",points:1e3,type:"grocery"},{name:"20¬¢ off/gallon",points:200,type:"gas"}],preferences:{autoCashOff:!1,smsOptIn:!0,emailOptIn:!0}}}_getNextMonth(){const n=new Date;return n.setMonth(n.getMonth()+1),n.toISOString().split("T")[0]}_setLoading(n){this._loading=n,this._searchBtn.disabled=n,n&&(this._content.innerHTML='\n        <div class="loading">\n          <div class="spinner"></div>\n          <p>Looking up customer...</p>\n        </div>\n      ')}_showError(n){this._content.innerHTML=`\n      <div class="error">\n        <p>‚ö†Ô∏è ${n}</p>\n        <button class="btn btn-secondary btn-sm" onclick="this.getRootNode().host._resetView()">Try Again</button>\n      </div>\n    `}_resetView(){this._customer=null,this._content.innerHTML='\n      <div class="empty">\n        <p>Enter a phone number to look up customer rewards</p>\n      </div>\n    '}_refresh(){this._customer&&this._searchCustomer()}_renderCustomer(){const n=this._customer,t="FreshPass"===n.tier;this._content.innerHTML=`\n      <div class="profile-section">\n        <div class="customer-header">\n          <div>\n            <h2 class="customer-name">${n.firstName} ${n.lastName}</h2>\n            <div class="customer-id">ID: ${n.id} ‚Ä¢ Member since ${new Date(n.memberSince).toLocaleDateString()}</div>\n          </div>\n          <span class="member-badge ${t?"freshpass":""}">${n.tier}${t?" ¬Æ":""}</span>\n        </div>\n        \n        <div class="points-card">\n          <div class="points-label">Available Points</div>\n          <div class="points-value">${n.points.current.toLocaleString()}</div>\n          <div class="points-expiry">${n.points.expiring} points expiring ${n.points.expiryDate}</div>\n          <div class="points-row">\n            <div class="points-stat">\n              <div class="points-stat-value">${n.points.lifetimeEarned.toLocaleString()}</div>\n              <div class="points-stat-label">Lifetime Earned</div>\n            </div>\n            <div class="points-stat">\n              <div class="points-stat-value">${n.points.lifetimeRedeemed.toLocaleString()}</div>\n              <div class="points-stat-label">Redeemed</div>\n            </div>\n            <div class="points-stat">\n              <div class="points-stat-value">${n.rewards.gasRewards.centsOff}¬¢</div>\n              <div class="points-stat-label">Gas Discount</div>\n            </div>\n          </div>\n        </div>\n        \n        <div class="info-grid">\n          <div class="info-card">\n            <div class="info-card-label">Phone</div>\n            <div class="info-card-value">${this._formatPhoneNumber(n.phone)}</div>\n          </div>\n          <div class="info-card">\n            <div class="info-card-label">Email</div>\n            <div class="info-card-value">${n.email}</div>\n          </div>\n          <div class="info-card">\n            <div class="info-card-label">Birthday Treat</div>\n            <div class="info-card-value">${n.rewards.birthdayTreat.available?"‚úì Available":"Redeemed"}</div>\n          </div>\n          <div class="info-card">\n            <div class="info-card-label">Free Monthly Item</div>\n            <div class="info-card-value">${n.rewards.freeMonthlyItem.available?"‚úì Available":"Redeemed"}</div>\n          </div>\n        </div>\n      </div>\n      \n      <div class="tabs">\n        <div class="tab active" data-tab="offers">Offers</div>\n        <div class="tab" data-tab="transactions">Transactions</div>\n        <div class="tab" data-tab="actions">Actions</div>\n      </div>\n      \n      <div class="tab-content active" data-tab="offers">\n        <div class="rewards-list">\n          ${n.availableOffers.map(n=>`\n            <div class="reward-item">\n              <div>\n                <div class="reward-name">${n.name}</div>\n                <div class="reward-meta">${"gas"===n.type?"‚õΩ Gas Reward":"üõí Grocery Reward"}</div>\n              </div>\n              <span class="reward-points">${n.points} pts</span>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n      \n      <div class="tab-content" data-tab="transactions">\n        <div class="rewards-list">\n          ${n.recentTransactions.map(n=>`\n            <div class="transaction-item">\n              <div>\n                <div>${n.store}</div>\n                <div class="transaction-date">${new Date(n.date).toLocaleDateString()}</div>\n              </div>\n              <div style="text-align:right">\n                <div class="transaction-amount">$${n.amount.toFixed(2)}</div>\n                <div class="transaction-points">+${n.pointsEarned} pts</div>\n              </div>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n      \n      <div class="tab-content" data-tab="actions">\n        <div class="quick-actions">\n          <div class="quick-action" data-action="add-points">\n            <div class="quick-action-icon">‚ûï</div>\n            <div class="quick-action-label">Add Points</div>\n          </div>\n          <div class="quick-action" data-action="redeem">\n            <div class="quick-action-icon">üéÅ</div>\n            <div class="quick-action-label">Redeem</div>\n          </div>\n          <div class="quick-action" data-action="toggle-cashoff">\n            <div class="quick-action-icon">üíµ</div>\n            <div class="quick-action-label">Auto Cash Off</div>\n          </div>\n          <div class="quick-action" data-action="update-profile">\n            <div class="quick-action-icon">‚úèÔ∏è</div>\n            <div class="quick-action-label">Edit Profile</div>\n          </div>\n          <div class="quick-action" data-action="link-accounts">\n            <div class="quick-action-icon">üîó</div>\n            <div class="quick-action-label">Link Accounts</div>\n          </div>\n          <div class="quick-action" data-action="send-offers">\n            <div class="quick-action-icon">üìß</div>\n            <div class="quick-action-label">Send Offers</div>\n          </div>\n        </div>\n      </div>\n      \n      <div class="actions">\n        <button class="btn btn-primary" id="copyInfoBtn">Copy Info</button>\n        <button class="btn btn-secondary" id="openPortalBtn">Open Portal</button>\n      </div>\n    `,this._attachEventListeners()}_attachEventListeners(){this.shadowRoot.querySelectorAll(".tab").forEach(n=>{n.addEventListener("click",()=>{this.shadowRoot.querySelectorAll(".tab").forEach(n=>n.classList.remove("active")),this.shadowRoot.querySelectorAll(".tab-content").forEach(n=>n.classList.remove("active")),n.classList.add("active"),this.shadowRoot.querySelector(`.tab-content[data-tab="${n.dataset.tab}"]`).classList.add("active")})}),this.shadowRoot.querySelectorAll(".quick-action").forEach(n=>{n.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("widget-action",{bubbles:!0,composed:!0,detail:{action:n.dataset.action,customer:this._customer}}))})}),this.shadowRoot.getElementById("copyInfoBtn")?.addEventListener("click",()=>{const n=this._customer,t=`Customer: ${n.firstName} ${n.lastName}\nID: ${n.id}\nPhone: ${n.phone}\nPoints: ${n.points.current}\nTier: ${n.tier}`;navigator.clipboard.writeText(t),this.dispatchEvent(new CustomEvent("info-copied",{bubbles:!0,composed:!0}))}),this.shadowRoot.getElementById("openPortalBtn")?.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("open-portal",{bubbles:!0,composed:!0,detail:{url:"https://www.albertsons.com/customer-account/rewards",customer:this._customer}}))})}}customElements.define("albertsons-rewards-widget",t)})();